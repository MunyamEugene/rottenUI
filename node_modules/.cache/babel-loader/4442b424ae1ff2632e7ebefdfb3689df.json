{"ast":null,"code":"import { call, put, takeEvery } from 'redux-saga/effects';\nimport { success_auth, success_fetch_hotels, success_fetch_services } from './actions/actions';\nimport actionNames from './actions/actionTypes';\nimport { getData, createVote, authentication } from './sagaApi/apiCall';\n\nfunction* fetchHotels(action) {\n  const hotles = yield call(getData, action.url);\n  yield put(success_fetch_hotels(hotles));\n}\n\nfunction* fetchServices(action) {\n  const services = yield call(getData, action.url);\n  yield put(success_fetch_services(services));\n}\n\nfunction* authenticate(action) {\n  let authUser = localStorage.getItem(\"user\");\n  console.log(authUser);\n\n  if (authUser == null) {\n    const authData = yield call(authentication, action.url);\n    const {\n      displayName,\n      emails\n    } = authData;\n    const user = {\n      displayName,\n      emails\n    };\n    localStorage.setItem(\"user\", JSON.stringify(authData));\n    yield put(success_auth(user));\n  } else {\n    yield put(success_auth(JSON.parse(authUser)));\n  }\n}\n\nfunction* vote(action) {\n  yield call(createVote, action.url, action.vote);\n}\n\nfunction* watcher() {\n  yield takeEvery(actionNames.VOTE, vote);\n  yield takeEvery(actionNames.FETCH_HOTELS, fetchHotels);\n  yield takeEvery(actionNames.FETCH_SERVICES, fetchServices);\n  yield takeEvery(actionNames.AUTH, authenticate);\n}\n\nexport default watcher;","map":{"version":3,"sources":["/home/eugene/Desktop/rotten-ui/src/redux/saga.js"],"names":["call","put","takeEvery","success_auth","success_fetch_hotels","success_fetch_services","actionNames","getData","createVote","authentication","fetchHotels","action","hotles","url","fetchServices","services","authenticate","authUser","localStorage","getItem","console","log","authData","displayName","emails","user","setItem","JSON","stringify","parse","vote","watcher","VOTE","FETCH_HOTELS","FETCH_SERVICES","AUTH"],"mappings":"AAAA,SAAQA,IAAR,EAAaC,GAAb,EAAiBC,SAAjB,QAAiC,oBAAjC;AACA,SAASC,YAAT,EAAuBC,oBAAvB,EAA6CC,sBAA7C,QAA2E,mBAA3E;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,SAASC,OAAT,EAAiBC,UAAjB,EAA6BC,cAA7B,QAAmD,mBAAnD;;AAEA,UAAUC,WAAV,CAAsBC,MAAtB,EAA6B;AACzB,QAAMC,MAAM,GAAG,MAAMZ,IAAI,CAACO,OAAD,EAASI,MAAM,CAACE,GAAhB,CAAzB;AACA,QAAMZ,GAAG,CAACG,oBAAoB,CAACQ,MAAD,CAArB,CAAT;AACH;;AAED,UAAUE,aAAV,CAAwBH,MAAxB,EAA+B;AAC3B,QAAMI,QAAQ,GAAG,MAAMf,IAAI,CAACO,OAAD,EAASI,MAAM,CAACE,GAAhB,CAA3B;AACA,QAAMZ,GAAG,CAACI,sBAAsB,CAACU,QAAD,CAAvB,CAAT;AACH;;AAED,UAAUC,YAAV,CAAuBL,MAAvB,EAA8B;AAC1B,MAAIM,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAf;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;;AACA,MAAGA,QAAQ,IAAE,IAAb,EAAkB;AAClB,UAAMK,QAAQ,GAAC,MAAMtB,IAAI,CAACS,cAAD,EAAgBE,MAAM,CAACE,GAAvB,CAAzB;AACA,UAAM;AAACU,MAAAA,WAAD;AAAaC,MAAAA;AAAb,QAAqBF,QAA3B;AACA,UAAMG,IAAI,GAAE;AAACF,MAAAA,WAAD;AAAaC,MAAAA;AAAb,KAAZ;AACAN,IAAAA,YAAY,CAACQ,OAAb,CAAqB,MAArB,EAA4BC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAA5B;AACA,UAAMrB,GAAG,CAACE,YAAY,CAACsB,IAAD,CAAb,CAAT;AACC,GAND,MAMK;AACL,UAAMxB,GAAG,CAACE,YAAY,CAACwB,IAAI,CAACE,KAAL,CAAWZ,QAAX,CAAD,CAAb,CAAT;AACC;AACJ;;AAED,UAAUa,IAAV,CAAenB,MAAf,EAAsB;AAClB,QAAMX,IAAI,CAACQ,UAAD,EAAYG,MAAM,CAACE,GAAnB,EAAuBF,MAAM,CAACmB,IAA9B,CAAV;AACH;;AAGD,UAAUC,OAAV,GAAmB;AACf,QAAM7B,SAAS,CAACI,WAAW,CAAC0B,IAAb,EAAkBF,IAAlB,CAAf;AACA,QAAM5B,SAAS,CAACI,WAAW,CAAC2B,YAAb,EAA0BvB,WAA1B,CAAf;AACA,QAAMR,SAAS,CAACI,WAAW,CAAC4B,cAAb,EAA4BpB,aAA5B,CAAf;AACA,QAAMZ,SAAS,CAACI,WAAW,CAAC6B,IAAb,EAAkBnB,YAAlB,CAAf;AACH;;AAED,eAAee,OAAf","sourcesContent":["import {call,put,takeEvery} from 'redux-saga/effects'\nimport { success_auth, success_fetch_hotels, success_fetch_services } from './actions/actions';\nimport actionNames from './actions/actionTypes';\nimport { getData,createVote, authentication } from './sagaApi/apiCall'\n\nfunction* fetchHotels(action){\n    const hotles = yield call(getData,action.url);\n    yield put(success_fetch_hotels(hotles));\n}\n\nfunction* fetchServices(action){\n    const services = yield call(getData,action.url);\n    yield put(success_fetch_services(services))\n}\n\nfunction* authenticate(action){\n    let authUser = localStorage.getItem(\"user\");\n    console.log(authUser)\n    if(authUser==null){\n    const authData=yield call(authentication,action.url);\n    const {displayName,emails}=authData;\n    const user= {displayName,emails}\n    localStorage.setItem(\"user\",JSON.stringify(authData))\n    yield put(success_auth(user))\n    }else{\n    yield put(success_auth(JSON.parse(authUser)))\n    }\n}\n\nfunction* vote(action){\n    yield call(createVote,action.url,action.vote);\n}\n\n\nfunction* watcher(){\n    yield takeEvery(actionNames.VOTE,vote)\n    yield takeEvery(actionNames.FETCH_HOTELS,fetchHotels);\n    yield takeEvery(actionNames.FETCH_SERVICES,fetchServices);\n    yield takeEvery(actionNames.AUTH,authenticate);\n}\n\nexport default watcher;"]},"metadata":{},"sourceType":"module"}